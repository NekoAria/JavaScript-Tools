javascript:(async()=>{const t=(t,e)=>({primaryUrl:t,secondaryUrl:e}),e={safeJsonParse(t){try{return JSON.parse(t)}catch{return null}},async safeFetch(t){try{const e=await fetch(t);return e.ok?e:null}catch{return null}},getMetaContent:(t,e="name")=>document.querySelector(`meta[${e}='${t}']`)?.content,showError(t){alert(`Error: ${t}`)},userNotFoundError:t=>`Unable to retrieve user information from ${t}`},r=async()=>{const r=document.querySelectorAll(".js-react-on-rails-component");for(const o of r){const r=e.safeJsonParse(o.textContent)?.creator_profile;if(r){const e=`https://${r.subdomain}`,o=`https://${r.external_id}.gumroad.com`;return t(e,o)}}throw new Error(e.userNotFoundError("Gumroad"))},o=async()=>{const r=document.querySelector("#control_frame");if(!r)throw new Error(e.userNotFoundError("Lofter"));const o=r.baseURI.replace(/\/$/,""),n=new URL(r.src).searchParams.get("blogId");if(!n)throw new Error(e.userNotFoundError("Lofter"));return t(o,`https://www.lofter.com/mentionredirect.do?blogId=${n}`)},n=async()=>{const{host:r}=location;let o;if("www.fanbox.cc"===r){const t=/^\/@([a-zA-Z0-9_-]+)$/.exec(location.pathname);if(!t?.[1])throw new Error(e.userNotFoundError("Fanbox"));o=t[1]}else o=r.split(".")[0];const n=await e.safeFetch(`https://api.fanbox.cc/creator.get?creatorId=${o}`);if(!n)throw new Error(e.userNotFoundError("Fanbox"));const a=await n.json();if(!a?.body?.user)throw new Error("Invalid user data returned from API");const s=location.href,c=`https://www.pixiv.net/fanbox/creator/${a.body.user.userId}`;return t(s,c)},a=async()=>{const r=document.querySelector('[class^="ProfileHeader_name_"]')?.textContent?.trim(),o=document.querySelector('a[href*="/u/page/follow/"]')?.getAttribute("href"),n=(o?/\/u\/page\/follow\/(\d+)/.exec(o):null)?.[1];if(!r||!n)throw new Error(e.userNotFoundError("Weibo"));return t(`https://www.weibo.com/n/${r}`,`https://www.weibo.com/u/${n}`)},s=async r=>{const o=e.getMetaContent("og:url","property");if(!o)throw new Error(`Unsupported site: ${r}`);const n=new URL(o);if("xfolio.jp"===n.host)return((r,o)=>{const n=document.querySelector("div.creatorInfo");if(n){const e=n.dataset.creatorPortfolioTopUrl,r=n.dataset.creatorUrl;return t(e,r)}if(r.pathname.startsWith("/users/")){const e=document.querySelector("div.userProfile__btn a"),r=new URL(e.href);let n;return n="xfolio.jp"===r.host?`https://xfolio.jp/${r.pathname.split("/").slice(-2).join("/")}`:r.origin,t(n,o)}throw new Error(e.userNotFoundError("Xfolio"))})(n,o);const a=e.getMetaContent("misskey:user-id");if(a)return((r,o)=>{const n=e.getMetaContent("og:url","property");if(!n)throw new Error(e.userNotFoundError("Misskey"));return t(n,`https://${r}/users/${o}`)})(r,a);throw new Error(`Unsupported site: ${r}`)},c={"bsky.app":async()=>{const r=/\/profile\/([^/]+)/.exec(location.pathname);if(!r?.[1])throw new Error(e.userNotFoundError("Bluesky"));const o=r[1];let n,a=`https://bsky.app/profile/${o}`;if(o.startsWith("did:")){const t=await e.safeFetch(`https://public.api.bsky.app/xrpc/app.bsky.actor.getProfile?actor=${o}`);if(t){a=`https://bsky.app/profile/${(await t.json()).handle}`}n=`https://bsky.app/profile/${o}`}else{const t=await e.safeFetch(`https://public.api.bsky.app/xrpc/com.atproto.identity.resolveHandle?handle=${o}`);if(t){n=`https://bsky.app/profile/${(await t.json()).did}`}else n=a}return t(a,n)},"fantia.jp":async()=>{const r=document.querySelector(".fanclub-header a");if(!r)throw new Error(e.userNotFoundError("Fantia"));const o=`https://fantia.jp${r.getAttribute("href")}`,n=document.querySelector("#nickname")?.getAttribute("value");return t(o,n?`https://fantia.jp/${n}`:o)},"inkbunny.net":async()=>{const r=document.querySelector('a[href^="watchlist_process.php"]')?.getAttribute("href");if(r?.includes("user_id=")){const e=location.href,o=r.split("user_id=")[1];return t(e,`https://inkbunny.net/user.php?user_id=${o}`)}throw new Error(e.userNotFoundError("Inkbunny"))},"www.patreon.com":async()=>{const r=document.querySelector("script#__NEXT_DATA__");if(!r)throw new Error("The necessary data on the Patreon page cannot be found");const o=e.safeJsonParse(r.textContent)?.props?.pageProps?.bootstrapEnvelope,n=o?.commonBootstrap?.campaign?.data?.relationships?.creator?.data?.id||o?.pageBootstrap?.campaign?.data?.relationships?.creator?.data?.id||o?.pageBootstrap?.pageUser?.data?.id;if(!n)throw new Error(e.userNotFoundError("Patreon"));let a=location.href.replace("http://","https://").replace(":443","").replace("/c/","").replace("/home","").replace(/\/$/,""),s=new URL(a);"patreon.com"===s.hostname&&(s.hostname="www.patreon.com"),s.searchParams.delete("__cf_chl_tk"),a=s.toString();return t(a,`https://www.patreon.com/user?u=${n}`)},"www.pixiv.net":async()=>{let r;if(location.pathname.includes("users"))r=location.toString().replace("en/","");else{const t=document.querySelector("a[href*='/users/']")?.dataset.gtmValue;if(!t)throw new Error(e.userNotFoundError("Pixiv"));r=`https://www.pixiv.net/users/${t}`}const o=r.replace("en/","").replace("users","stacc/id"),n=await e.safeFetch(o);return t(r,n?.url||r)},"www.youtube.com":async()=>{if(location.pathname.includes("/watch"))throw new Error("Please open the channel page");const e=document.querySelector("span.yt-content-metadata-view-model-wiz__metadata-text")?.textContent?.trim();if(!e?.startsWith("@"))throw new Error("Please reload the channel page");const r=document.querySelector("link[rel='canonical']")?.href,o=`https://www.youtube.com/${e}`;return t(o,r||o)},"x.com":async()=>{const r=document.querySelector("script[type='application/ld+json']");if(!r)throw new Error("Please open the profile page");const o=e.safeJsonParse(r.innerText)?.mainEntity;if(!o)throw new Error(e.userNotFoundError("Twitter"));const n=`https://twitter.com/${o.additionalName}`,a=`https://twitter.com/intent/user?user_id=${o.identifier}`;return t(n,a)}};await(async()=>{const{host:t}=location;try{const e=(t=>{if(c[t])return c[t];const e=[["fanbox.cc",n],["gumroad.com",r],["lofter.com",o],["weibo.com",a]];for(const[r,o]of e)if(t.includes(r))return o;return null})(t);((t,e)=>{const r=`${t.primaryUrl}\n${t.secondaryUrl}`;navigator.userAgent.toLowerCase().includes("firefox")?alert(r):prompt(`${e} URLs`,r)})(e?await e():await s(t),t)}catch(t){e.showError(t.message)}})()})();