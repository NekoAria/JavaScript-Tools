javascript:(async()=>{const r=(r,t)=>({primaryUrl:r,secondaryUrl:t}),t={safeJsonParse(r){try{return JSON.parse(r)}catch{return null}},async safeFetch(r){try{const t=await fetch(r);return t.ok?t:null}catch{return null}},getMetaContent:(r,t="name")=>document.querySelector(`meta[${t}='${r}']`)?.content,showError(r){alert(`Error: ${r}`)},userNotFoundError:r=>`Unable to retrieve user information from ${r}`},e=async()=>{const e=document.querySelector("#app")?.dataset.page;if(!e)throw new Error(t.userNotFoundError("Gumroad"));const o=t.safeJsonParse(e)?.props?.creator_profile;if(!o)throw new Error(t.userNotFoundError("Gumroad"));const n=`https://${o.subdomain}`,a=`https://${o.external_id}.gumroad.com`;return r(n,a)},o=async()=>{const e=document.querySelector("#control_frame");if(!e)throw new Error(t.userNotFoundError("Lofter"));const o=e.baseURI.replace(/\/$/,""),n=new URL(e.src).searchParams.get("blogId");if(!n)throw new Error(t.userNotFoundError("Lofter"));return r(o,`https://www.lofter.com/mentionredirect.do?blogId=${n}`)},n=async()=>{const{pathname:e}=location,o=document.querySelector("h2.user-profile__name");if(!o)throw new Error(t.userNotFoundError("Mihuashi"));const n=o.cloneNode(!0),a=n.querySelector("span");a&&a.remove();const s=n.textContent.trim();if(!s)throw new Error(t.userNotFoundError("Mihuashi"));let c,i;if(e.startsWith("/profiles/")){const r=/\/profiles\/(\d+)/.exec(e);if(!r?.[1])throw new Error(t.userNotFoundError("Mihuashi"));c=`https://www.mihuashi.com/profiles/${r[1]}`,i=`https://www.mihuashi.com/users/${s}`}else{if(!e.startsWith("/users/"))throw new Error(t.userNotFoundError("Mihuashi"));{const r=await t.safeFetch(`https://www.mihuashi.com/api/v1/users/${s}/?by=name`);if(!r)throw new Error(t.userNotFoundError("Mihuashi"));const e=await r.json();if(!e?.user?.id)throw new Error("Invalid user data returned from API");c=`https://www.mihuashi.com/profiles/${e.user.id}`,i=`https://www.mihuashi.com/users/${s}`}}return r(c,i)},a=async()=>{const{host:e}=location;let o;if("www.fanbox.cc"===e){const r=/^\/@([a-zA-Z0-9_-]+)$/.exec(location.pathname);if(!r?.[1])throw new Error(t.userNotFoundError("Fanbox"));o=r[1]}else o=e.split(".")[0];const n=await t.safeFetch(`https://api.fanbox.cc/creator.get?creatorId=${o}`);if(!n)throw new Error(t.userNotFoundError("Fanbox"));const a=await n.json();if(!a?.body?.user)throw new Error("Invalid user data returned from API");const s=location.href,c=`https://www.pixiv.net/fanbox/creator/${a.body.user.userId}`;return r(s,c)},s=async()=>{const e=document.querySelector('[class^="_name_"]')?.textContent?.trim(),o=document.querySelector('a[href*="/u/page/follow/"]')?.getAttribute("href"),n=(o?/\/u\/page\/follow\/(\d+)/.exec(o):null)?.[1];if(!e||!n)throw new Error(t.userNotFoundError("Weibo"));return r(`https://www.weibo.com/n/${e}`,`https://www.weibo.com/u/${n}`)},c=async e=>{const o=t.getMetaContent("og:url","property");if(!o)throw new Error(`Unsupported site: ${e}`);const n=new URL(o);if("xfolio.jp"===n.host)return((e,o)=>{const n=document.querySelector("div.creatorInfo");if(n){const t=n.dataset.creatorPortfolioTopUrl,e=n.dataset.creatorUrl;return r(t,e)}if(e.pathname.startsWith("/users/")){const t=document.querySelector("div.userProfile__btn a"),e=new URL(t.href);let n;return n="xfolio.jp"===e.host?`https://xfolio.jp/${e.pathname.split("/").slice(-2).join("/")}`:e.origin,r(n,o)}throw new Error(t.userNotFoundError("Xfolio"))})(n,o);const a=t.getMetaContent("misskey:user-id");if(a)return((e,o)=>{const n=t.getMetaContent("og:url","property");if(!n)throw new Error(t.userNotFoundError("Misskey"));return r(n,`https://${e}/users/${o}`)})(e,a);throw new Error(`Unsupported site: ${e}`)},i={"bsky.app":async()=>{const e=/\/profile\/([^/]+)/.exec(location.pathname);if(!e?.[1])throw new Error(t.userNotFoundError("Bluesky"));const o=e[1];let n,a=`https://bsky.app/profile/${o}`;if(o.startsWith("did:")){const r=await t.safeFetch(`https://public.api.bsky.app/xrpc/app.bsky.actor.getProfile?actor=${o}`);if(r){a=`https://bsky.app/profile/${(await r.json()).handle}`}n=`https://bsky.app/profile/${o}`}else{const r=await t.safeFetch(`https://public.api.bsky.app/xrpc/com.atproto.identity.resolveHandle?handle=${o}`);if(r){n=`https://bsky.app/profile/${(await r.json()).did}`}else n=a}return r(a,n)},"fantia.jp":async()=>{const e=document.querySelector(".fanclub-header a");if(!e)throw new Error(t.userNotFoundError("Fantia"));const o=`https://fantia.jp${e.getAttribute("href")}`,n=document.querySelector("#nickname")?.getAttribute("value");return r(o,n?`https://fantia.jp/${n}`:o)},"inkbunny.net":async()=>{const e=document.querySelector('a[href^="watchlist_process.php"]')?.getAttribute("href");if(e?.includes("user_id=")){const t=location.href,o=e.split("user_id=")[1];return r(t,`https://inkbunny.net/user.php?user_id=${o}`)}throw new Error(t.userNotFoundError("Inkbunny"))},"ko-fi.com":async()=>{const e=document.querySelector("[data-page-id]")?.getAttribute("data-page-id");if(e){const t=location.href;return r(t,`https://ko-fi.com/${e}`)}throw new Error(t.userNotFoundError("KoFi"))},"www.facebook.com":async()=>{const e=t.getMetaContent("al:android:url","property"),o=t.getMetaContent("og:url","property");if(!o)throw new Error(t.userNotFoundError("Facebook"));const n=o,a=`https://www.facebook.com/profile.php?id=${/\d+/.exec(e)[0]}`;return r(n,a)},"www.patreon.com":async()=>{const e=window.__NEXT_DATA__;let o;if(e){const r=e?.props?.pageProps?.bootstrapEnvelope;o=r?.commonBootstrap?.campaign?.data?.relationships?.creator?.data?.id||r?.pageBootstrap?.campaign?.data?.relationships?.creator?.data?.id||r?.pageBootstrap?.pageUser?.data?.id}if(o||(o=document.documentElement.outerHTML.match(/https:\/\/www\.patreon\.com\/api\/user\/(\d+)/)?.[1]),!o)throw new Error(t.userNotFoundError("Patreon"));const n=new URL(location.href);n.protocol="https:","patreon.com"===n.hostname&&(n.hostname="www.patreon.com");const a=n.pathname.replace(/\/$/,"").replace(/^\/c\//,"/").replace(/^\/cw\//,"/").replace(/\/home$/,"").replace(/\/profile\/creators/,"/user");n.pathname=a;const s=n.toString();return r(s,`https://www.patreon.com/user?u=${o}`)},"www.pixiv.net":async()=>{let e;if(location.pathname.includes("users"))e=location.toString().replace("en/","");else{const r=document.querySelector("a[href*='/users/']")?.dataset.gtmValue;if(!r)throw new Error(t.userNotFoundError("Pixiv"));e=`https://www.pixiv.net/users/${r}`}const o=e.replace("en/","").replace("users","stacc/id"),n=await t.safeFetch(o);return r(e,n?.url||e)},"www.youtube.com":async()=>{const t=location.pathname;if(t.startsWith("/watch")||t.startsWith("/playlist"))throw new Error("Please open the channel page");const e=window.ytInitialData;if(!e?.metadata)throw new Error("Metadata not found");const o=e?.metadata?.channelMetadataRenderer;if(!o)throw new Error("Channel metadata renderer not found");let{vanityChannelUrl:n,channelUrl:a}=o;if(n){const r=new URL(n);"http:"===r.protocol&&(r.protocol="https:"),n=decodeURI(r.href)}if(!n||!a)throw new Error("Failed to extract channel URLs");return r(n,a)},"x.com":async()=>{const e=document.querySelector("script[type='application/ld+json']");if(!e)throw new Error("Please open the profile page");const o=t.safeJsonParse(e.textContent)?.mainEntity;if(!o)throw new Error(t.userNotFoundError("Twitter"));const n=`https://twitter.com/${o.additionalName}`,a=`https://twitter.com/intent/user?user_id=${o.identifier}`;return r(n,a)}};await(async()=>{const{host:r}=location;try{const t=(r=>{if(i[r])return i[r];const t=[["fanbox.cc",a],["gumroad.com",e],["lofter.com",o],["mihuashi.com",n],["weibo.com",s]];for(const[e,o]of t)if(r.includes(e))return o;return null})(r);((r,t)=>{const e=`${r.primaryUrl}\n${r.secondaryUrl}`;navigator.userAgent.toLowerCase().includes("firefox")?alert(e):prompt(`${t} URLs`,e)})(t?await t():await c(r),r)}catch(r){t.showError(r.message)}})()})();